<div class="roles-container">

  <!-- Encabezado -->
  <div class="roles-header">
    <h2>Gestión de Roles</h2>
    <button class="btn-agregar" (click)="resetForm()">+ Nuevo Rol</button>
  </div>

  <!-- Formulario -->
  <form (ngSubmit)="guardarRol()" class="form-roles">
    <div class="form-group">
      <label>Nombre del Rol</label>
      <input type="text" [(ngModel)]="nuevoRol.nombre" name="nombre" required>
    </div>

    <div class="form-group">
      <label>Descripción</label>
      <textarea [(ngModel)]="nuevoRol.descripcion" name="descripcion"></textarea>
    </div>

    <div class="form-group permisos">
      <label>Permisos</label>
      <div class="checkbox-group">
        <label *ngFor="let permiso of permisosDisponibles">
          <input type="checkbox" [checked]="tienePermiso(permiso)" (change)="togglePermiso(permiso)">
          {{ permiso }}
        </label>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-submit">
        {{ editando ? 'Actualizar' : 'Agregar' }} Rol
      </button>
    </div>
  </form>

  <!-- Tabla -->
  <div class="tabla-wrapper">
    <table class="tabla-roles">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Descripción</th>
          <th>Permisos</th>
          <th class="acciones-col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let rol of roles">
          <td>{{ rol.nombre }}</td>
          <td>{{ rol.descripcion }}</td>
          <td>{{ rol.permisos?.join(', ') }}</td>
          <td class="acciones">
            <button (click)="editarRol(rol)" class="btn-accion editar">Editar</button>
            <button (click)="eliminarRol(rol.id)" class="btn-accion eliminar">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
